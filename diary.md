## 日記

### 問題概要

(誤読修正済み: raw score は無視される)

H * W の盤面が与えられる。
各マスは R 個の区画に分割されている。
なおそれぞれの区画は連結とは限らず、後に塗り変えることにはなるが最初から色を持つ。
次のような区画への彩色を与えよ。

1.  4近傍で隣接する区画は異なる色を持つ
1.  使われる色の数 C をできるだけ最小化する
1.  塗り直すマスの数 P をできるだけ最小化する

ただし C, P の間に順序はなく、両方いい感じに下げる。

-   20 \le H \le 200
-   20 \le W \le 200
-   2 \le (the number of initial colors) \le 5
-   8 \le HW/10 \le T \le HW/50 \le 4000, the number of regiions

区画の連結成分数は 1 \le k \le 5 から一様に選ばれる。
それぞれの区画に対して連結成分数個の点をseedとして選び、それを膨らませていき盤面を作る。

### 5/5

起きたら始まってたのでやる。
3日間だけなの短すぎない？

```
Registration & Submission
Opens:  05.04.2018 21:00 EDT (2018-05-05T10:00:00+09:00)
Closes: 05.07.2018 21:00 EDT (2018-05-08T10:00:00+09:00)
```

今回の公式visualizerはpngを2枚吐くらしい。
当然ながら `javax.imageio.ImageIO` なのだけど処理が遅くてうーん。
1MB 越えてくるのもつらいが、適当なoptimizerに食わせれば半減する。

所感。
今回もまたほぼ最適解出そう。
盤面上に乗ってはいるが連結関係のみ効いてくる。
ここPiet感ある。
区画が非連結なことを無視すれば平面グラフとなる。
使われる色の最小化が最優先。
となると初期状態での配色情報は無視してよい。
[四色定理](https://ja.wikipedia.org/wiki/%E5%9B%9B%E8%89%B2%E5%AE%9A%E7%90%86) があるので結果の色数はそう大きくならない。
まずは点彩色をし、余った時間で得られた彩色を適当にして残りを調整する感じか。
点彩色の方法は複数種類取れるなら取れた方がよいので色の置換を全通り試すだけでは不足。

とりあえずは単純連結ほぼ平面グラフの彩色問題。
頂点数4000以下。
グラフ理論の時間だ。

Wilson グラフ理論入門 定理17.3 「すべての単純平面的グラフは6-彩色可能である」。
証明は頂点数に関する帰納法。
次数5以下の点を取りそれ以外を帰納法の仮定で6-彩色する。
点の存在は定理13.6 「すべての単純平面的グラフには次数5以下の点がある」。

定理17.4 「すべての単純平面的グラフは5-彩色可能である」。
6-彩色と同様にすると、次数5の頂点だけ処理できない。
平面性から完全グラフK5が含まれず、その周りの5個の頂点から互いに隣接しない2頂点が取れる。
中央の次数5の頂点とこの2頂点を縮約してひとつの頂点にし帰納法の仮定を使えば、2頂点が同じ色であるという制約下での5-彩色が得られる。
よって中央が塗れる。

超越的なことはしてないけど計算間に合わないじゃないかという気持ち。
タイガーブックのレジスタの章に逃げればいいのかな。

先にとりあえず貪欲を書こう。
書いた。
この時点で色数11が最高。
seed < 100までしか回してないので12もありえるがそう大きくはならないはず。
結局のところ今回もかなり局所的に解けるのではないか。

k-彩色が固定されれば残りの部分の最適化は `binomial(k, C) * factorial(C)` 通りを試せばよく、例えば k = 8 かつ C = 5 なら 6720 通りなので十分全探索できる。
とりあえず書いた。
O(RC + \binom{k}{C} \cdot C! \cdot C) なので数回呼ぶくらいなら無視できる。

環境変数経由で実行binaryにseed値渡してしまうと出力が楽っぽい。
表を出してみたが今のところ面白げな相関はない。
時間いっぱい乱択するやつにして運の影響を弾けば変わるかもだし次はそれ。

乱択にして提出。 `39cf31197693cd263258695b140e57791398fc75`。
4位くらいのつもりだったの24位ってなんだそれは。
終了3日前とはいえ初日なんだからもっと気持ちのよい順位をください。
どうみても色数のレベルで悪い。
まあまだ乱択。
[kosakkun](https://www.topcoder.com/members/kosakkun) さんが2位に居る。
彼には頑張ってほしい。
2位と3位の間に壁がある。
単に人数が少ないからそう見えるのならよいが、気付かなければスタートラインに立てないような何かが間にあるかもなので注意する。
ところで順位表の表示物増えすぎでは。

| Handle       | Score      | Rank  | Last Submission Time                             | Language  | Example Tests | Submissions  | Current Rating  | Predicted Rating  | Rating Delta |
|--------------|------------|-------|--------------------------------------------------|-----------|---------------|--------------|-----------------|-------------------|--------------|
| CatalinT     | 870378.43  | 1     | 05.05.2018 06:24:45 (2018-05-05T19:24:45+09:00)  | C++       | 2             | 2            | 2443            | 2567.79           | 124.79       |
| kosakkun     | 865844.68  | 2     | 05.05.2018 05:21:48 (2018-05-05T18:21:48+09:00)  | C++       | 4             | 4            | 1562            | 1805.75           | 243.75       |
| imazato      | 799939.98  | 3     | 05.05.2018 04:44:26 (2018-05-05T17:44:26+09:00)  | C++       | 3             | 2            | 2474            | 2531.60           | 57.60        |
| atsT5515     | 787719.51  | 4     | 05.05.2018 02:32:42 (2018-05-05T15:32:42+09:00)  | C++       | 1             | 1            | 2407            | 2466.25           | 59.25        |
| Daiver19     | 761686.69  | 5     | 05.05.2018 01:35:59 (2018-05-05T14:35:59+09:00)  | C++       | 2             | 1            | 2008            | 2098.22           | 90.22        |
| chokudai     | 753874.24  | 6     | 05.05.2018 05:33:11 (2018-05-05T18:33:11+09:00)  | C#        | 2             | 2            | 2730            | 2714.84           | -15.16       |
| tanzaku      | 748205.77  | 7     | 05.05.2018 04:36:01 (2018-05-05T17:36:01+09:00)  | Java      | 2             | 2            | 1101            | 1283.61           | 182.61       |
| ichyo        | 731696.63  | 8     | 05.05.2018 04:28:30 (2018-05-05T17:28:30+09:00)  | C++       | 5             | 1            | 1414            | 1602.70           | 188.70       |
| tourist      | 731086.90  | 9     | 05.05.2018 06:30:30 (2018-05-05T19:30:30+09:00)  | C++       | 1             | 1            | 1935            | 2027.10           | 92.10        |
| nika         | 715297.26  | 10    | 05.05.2018 06:10:43 (2018-05-05T19:10:43+09:00)  | C++       | 1             | 2            | 2455            | 2430.11           | -24.89       |
| packer_jp    | 681725.74  | 11    | 05.05.2018 05:37:33 (2018-05-05T18:37:33+09:00)  | C++       | 1             | 1            | -               | -                 | -            |
| pes          | 678878.66  | 12    | 05.05.2018 03:18:06 (2018-05-05T16:18:06+09:00)  | C++       | 2             | 1            | 1507            | 1646.67           | 139.67       |
| hoshi524     | 673126.47  | 13    | 05.05.2018 05:40:24 (2018-05-05T18:40:24+09:00)  | C++       | 2             | 2            | 2042            | 2062.27           | 20.27        |
| shilov       | 668621.90  | 14    | 05.05.2018 04:49:15 (2018-05-05T17:49:15+09:00)  | Java      | 4             | 2            | 1160            | 1315.71           | 155.71       |
| Hino         | 657612.63  | 15    | 05.05.2018 01:58:42 (2018-05-05T14:58:42+09:00)  | Python    | 2             | 1            | 1077            | 1308.94           | 231.94       |
| Stonefeang   | 652326.78  | 16    | 05.05.2018 06:02:53 (2018-05-05T19:02:53+09:00)  | C++       | 6             | 2            | 1415            | 1540.73           | 125.73       |
| machy        | 651458.98  | 17    | 05.05.2018 03:44:18 (2018-05-05T16:44:18+09:00)  | C++       | 1             | 1            | 1793            | 1834.77           | 41.77        |
| kishore_g84  | 644324.60  | 18    | 05.05.2018 03:00:52 (2018-05-05T16:00:52+09:00)  | Java      | 1             | 1            | 1408            | 1503.32           | 95.32        |
| kt_tenel     | 640184.17  | 19    | 05.05.2018 04:59:32 (2018-05-05T17:59:32+09:00)  | C++       | 1             | 1            | 1265            | 1615.46           | 350.46       |
| PItS         | 630545.56  | 20    | 05.05.2018 04:49:44 (2018-05-05T17:49:44+09:00)  | C++       | 2             | 2            | 1682            | 1734.93           | 52.93        |
| ualabs       | 628745.94  | 21    | 05.05.2018 06:03:03 (2018-05-05T19:03:03+09:00)  | C++       | 1             | 1            | 1825            | 1842.96           | 17.96        |
| yuya178      | 628117.59  | 22    | 05.05.2018 04:26:01 (2018-05-05T17:26:01+09:00)  | Java      | 4             | 2            | 1350            | 1601.47           | 251.47       |
| iehn         | 626928.49  | 23    | 05.05.2018 04:47:01 (2018-05-05T17:47:01+09:00)  | C++       | 5             | 3            | 1765            | 1775.32           | 10.32        |
| kimiyuki     | 623465.53  | 24    | 05.05.2018 06:45:29 (2018-05-05T19:45:29+09:00)  | C++       | 1             | 1            | 2069            | 2026.00           | -43.00       |
| tomerun      | 607639.27  | 25    | 05.04.2018 23:47:44 (2018-05-05T12:47:44+09:00)  | C++       | 1             | 1            | 2576            | 2465.35           | -110.65      |

<details>
<summary>表</summary>

| seed  | H     | W     | R     | C     | k     | skipped | score         | HW    | HW/R  | iteration     | time    |
|-------|-------|-------|-------|-------|-------|---------|---------------|-------|-------|---------------|---------|
| 1     | 20    | 20    | 16    | 2     | 7     | 150     | 700250        | 400   | 25    |  3567669      | 9.50002 |
| 2     | 200   | 200   | 1290  | 5     | 10    | 7270    | 1032730       | 40000 | 31    |  32024        | 9.50021 |
| 3     | 183   | 55    | 214   | 2     | 8     | 2248    | 807817        | 10065 | 47    |  249564       | 9.50006 |
| 4     | 141   | 198   | 1642  | 2     | 10    | 5139    | 1022779       | 27918 | 17    |  31738        | 9.50018 |
| 5     | 156   | 23    | 83    | 2     | 7     | 1086    | 702502        | 3588  | 43    |  758402       | 9.50003 |
| 6     | 82    | 76    | 207   | 4     | 8     | 1505    | 804727        | 6232  | 30    |  259168       | 9.50003 |
| 7     | 112   | 145   | 854   | 3     | 9     | 2918    | 913322        | 16240 | 19    |  55902        | 9.50009 |
| 8     | 105   | 146   | 806   | 4     | 9     | 2908    | 912422        | 15330 | 19    |  57164        | 9.50024 |
| 9     | 41    | 144   | 227   | 5     | 8     | 1457    | 804447        | 5904  | 26    |  227620       | 9.50003 |
| 10    | 46    | 164   | 359   | 2     | 9     | 1603    | 905941        | 7544  | 21    |  147112       | 9.50004 |
| 11    | 72    | 198   | 432   | 3     | 9     | 2989    | 911267        | 14256 | 33    |  123005       | 9.50006 |
| 12    | 101   | 43    | 101   | 3     | 7     | 1229    | 703114        | 4343  | 43    |  566629       | 9.50002 |
| 13    | 151   | 136   | 855   | 5     | 9     | 3705    | 916831        | 20536 | 24    |  60885        | 9.50007 |
| 14    | 50    | 98    | 136   | 5     | 8     | 1422    | 803478        | 4900  | 36    |  398595       | 9.50004 |
| 15    | 190   | 56    | 322   | 4     | 9     | 2421    | 908219        | 10640 | 33    |  162221       | 9.50008 |
| 16    | 48    | 81    | 111   | 3     | 7     | 1011    | 702877        | 3888  | 35    |  532719       | 9.50003 |
| 17    | 130   | 171   | 463   | 5     | 9     | 4737    | 917493        | 22230 | 48    |  114435       | 9.50009 |
| 18    | 177   | 175   | 1191  | 3     | 10    | 5742    | 1025233       | 30975 | 26    |  41577        | 9.50006 |
| 19    | 104   | 152   | 718   | 4     | 9     | 3003    | 912805        | 15808 | 22    |  74752        | 9.50012 |
| 20    | 172   | 154   | 1394  | 3     | 10    | 4823    | 1021665       | 26488 | 19    |  35717        | 9.50025 |
| 21    | 106   | 142   | 1254  | 4     | 9     | 2558    | 912494        | 15052 | 12    |  41548        | 9.50022 |
| 22    | 135   | 82    | 1006  | 3     | 9     | 2068    | 909002        | 11070 | 11    |  54291        | 9.50003 |
| 23    | 117   | 122   | 620   | 4     | 9     | 2737    | 911537        | 14274 | 23    |  83829        | 9.50004 |
| 24    | 90    | 77    | 216   | 4     | 8     | 1713    | 805217        | 6930  | 32    |  254147       | 9.50007 |
| 25    | 136   | 77    | 455   | 2     | 9     | 2065    | 908407        | 10472 | 23    |  116807       | 9.50006 |
| 26    | 120   | 107   | 285   | 3     | 8     | 2400    | 810440        | 12840 | 45    |  185316       | 9.50005 |
| 27    | 57    | 93    | 407   | 5     | 8     | 943     | 804358        | 5301  | 13    |  122443       | 9.50005 |
| 28    | 136   | 21    | 68    | 5     | 7     | 907     | 701949        | 2856  | 42    |  827471       | 9.50003 |
| 29    | 142   | 85    | 251   | 4     | 8     | 2726    | 809344        | 12070 | 48    |  221175       | 9.50003 |
| 30    | 24    | 115   | 78    | 4     | 7     | 953     | 701807        | 2760  | 35    |  792982       | 9.50002 |
| 31    | 159   | 154   | 583   | 2     | 9     | 4463    | 920023        | 24486 | 42    |  89753        | 9.50004 |
| 32    | 112   | 82    | 612   | 4     | 9     | 1794    | 907390        | 9184  | 15    |  87693        | 9.50008 |
| 33    | 124   | 32    | 141   | 5     | 7     | 989     | 702979        | 3968  | 28    |  420592       | 9.50002 |
| 34    | 130   | 25    | 101   | 3     | 7     | 762     | 702488        | 3250  | 32    |  555721       | 9.50003 |
| 35    | 51    | 22    | 80    | 3     | 7     | 400     | 700722        | 1122  | 14    |  732451       | 9.50002 |
| 36    | 176   | 32    | 170   | 3     | 8     | 1336    | 804296        | 5632  | 33    |  319546       | 9.50007 |
| 37    | 166   | 50    | 307   | 5     | 8     | 1577    | 806723        | 8300  | 27    |  169399       | 9.50004 |
| 38    | 85    | 160   | 400   | 5     | 9     | 3006    | 910594        | 13600 | 34    |  129225       | 9.50005 |
| 39    | 121   | 177   | 823   | 4     | 9     | 3883    | 917534        | 21417 | 26    |  62401        | 9.50013 |
| 40    | 83    | 149   | 247   | 4     | 9     | 3059    | 909308        | 12367 | 50    |  195551       | 9.50005 |
| 41    | 188   | 169   | 2888  | 2     | 10    | 5474    | 1026298       | 31772 | 11    |  17480        | 9.50025 |
| 42    | 160   | 68    | 278   | 2     | 8     | 1851    | 809029        | 10880 | 39    |  187507       | 9.50005 |
| 43    | 144   | 33    | 169   | 5     | 8     | 1318    | 803434        | 4752  | 28    |  294622       | 9.50004 |
| 44    | 139   | 99    | 292   | 3     | 8     | 2430    | 811331        | 13761 | 47    |  179594       | 9.50003 |
| 45    | 115   | 117   | 336   | 4     | 9     | 3043    | 910412        | 13455 | 40    |  151935       | 9.50006 |
| 46    | 105   | 152   | 469   | 3     | 9     | 3220    | 912740        | 15960 | 34    |  104115       | 9.5001  |
| 47    | 170   | 150   | 1593  | 3     | 10    | 4649    | 1020851       | 25500 | 16    |  30607        | 9.50016 |
| 48    | 62    | 184   | 671   | 5     | 9     | 2238    | 909170        | 11408 | 17    |  76688        | 9.50012 |
| 49    | 35    | 57    | 124   | 3     | 7     | 504     | 701491        | 1995  | 16    |  455598       | 9.50043 |
| 50    | 30    | 65    | 45    | 5     | 6     | 794     | 601156        | 1950  | 43    |  1424990      | 9.50002 |
| 51    | 130   | 198   | 2574  | 3     | 10    | 4583    | 1021157       | 25740 | 10    |  20374        | 9.50047 |
| 52    | 122   | 33    | 149   | 3     | 8     | 1076    | 802950        | 4026  | 27    |  370035       | 9.50004 |
| 53    | 58    | 199   | 268   | 4     | 8     | 2493    | 809049        | 11542 | 43    |  204326       | 9.50005 |
| 54    | 157   | 137   | 597   | 5     | 9     | 4167    | 917342        | 21509 | 36    |  79519        | 9.50008 |
| 55    | 38    | 193   | 178   | 3     | 8     | 1885    | 805449        | 7334  | 41    |  299105       | 9.50004 |
| 56    | 77    | 127   | 362   | 4     | 9     | 2229    | 907550        | 9779  | 27    |  143183       | 9.50007 |
| 57    | 132   | 183   | 561   | 5     | 9     | 4790    | 919366        | 24156 | 43    |  93152        | 9.50002 |
| 58    | 57    | 56    | 199   | 5     | 8     | 893     | 802299        | 3192  | 16    |  284916       | 9.50005 |
| 59    | 168   | 186   | 1838  | 4     | 10    | 5530    | 1025718       | 31248 | 17    |  27254        | 9.5001  |
| 60    | 98    | 173   | 368   | 3     | 9     | 3631    | 913323        | 16954 | 46    |  144999       | 9.50008 |
| 61    | 152   | 177   | 840   | 5     | 10    | 5187    | 1021717       | 26904 | 32    |  38964        | 9.50008 |
| 62    | 147   | 176   | 1361  | 3     | 10    | 4674    | 1021198       | 25872 | 19    |  33165        | 9.50022 |
| 63    | 42    | 130   | 182   | 4     | 8     | 1399    | 804061        | 5460  | 30    |  290958       | 9.50002 |
| 64    | 147   | 99    | 291   | 4     | 8     | 2927    | 811626        | 14553 | 50    |  179688       | 9.50003 |
| 65    | 36    | 186   | 418   | 2     | 9     | 1433    | 905263        | 6696  | 16    |  122930       | 9.50006 |
| 66    | 75    | 165   | 475   | 3     | 9     | 2532    | 909843        | 12375 | 26    |  109967       | 9.50006 |
| 67    | 174   | 111   | 429   | 5     | 9     | 4207    | 915107        | 19314 | 45    |  119770       | 9.50008 |
| 68    | 101   | 187   | 449   | 4     | 9     | 3981    | 914906        | 18887 | 42    |  113524       | 9.50006 |
| 69    | 170   | 173   | 2941  | 5     | 10    | 4990    | 1024420       | 29410 | 10    |  15557        | 9.50027 |
| 70    | 156   | 39    | 434   | 2     | 9     | 1287    | 904797        | 6084  | 14    |  125152       | 9.50008 |
| 71    | 22    | 35    | 19    | 2     | 6     | 323     | 600447        | 770   | 40    |  3619625      | 9.50002 |
| 72    | 34    | 164   | 428   | 3     | 9     | 1209    | 904367        | 5576  | 13    |  128110       | 9.50005 |
| 73    | 176   | 159   | 1076  | 2     | 10    | 5106    | 1022878       | 27984 | 26    |  46464        | 9.50012 |
| 74    | 46    | 198   | 607   | 2     | 9     | 1775    | 907333        | 9108  | 15    |  91307        | 9.5001  |
| 75    | 188   | 29    | 136   | 2     | 7     | 1338    | 704114        | 5452  | 40    |  452229       | 9.50002 |
| 76    | 194   | 151   | 732   | 3     | 9     | 5116    | 924178        | 29294 | 40    |  71166        | 9.50002 |
| 77    | 97    | 196   | 1118  | 5     | 10    | 3562    | 1015450       | 19012 | 17    |  33819        | 9.50012 |
| 78    | 166   | 128   | 664   | 2     | 9     | 3749    | 917499        | 21248 | 32    |  78384        | 9.50004 |
| 79    | 150   | 120   | 857   | 2     | 9     | 3151    | 914849        | 18000 | 21    |  60052        | 9.50011 |
| 80    | 112   | 157   | 418   | 2     | 9     | 3542    | 914042        | 17584 | 42    |  124934       | 9.50009 |
| 81    | 24    | 180   | 96    | 5     | 7     | 1220    | 703100        | 4320  | 45    |  572276       | 9.50003 |
| 82    | 142   | 195   | 710   | 5     | 9     | 5081    | 922609        | 27690 | 39    |  58065        | 9.50014 |
| 83    | 135   | 157   | 1324  | 4     | 10    | 3994    | 1017201       | 21195 | 16    |  36617        | 9.50015 |
| 84    | 158   | 163   | 757   | 5     | 9     | 4198    | 921556        | 25754 | 34    |  53530        | 9.50012 |
| 85    | 57    | 163   | 238   | 3     | 8     | 1789    | 807502        | 9291  | 39    |  231265       | 9.50004 |
| 86    | 41    | 51    | 116   | 5     | 8     | 671     | 801420        | 2091  | 18    |  446684       | 9.50003 |
| 87    | 48    | 192   | 341   | 5     | 8     | 1744    | 807472        | 9216  | 27    |  147774       | 9.50007 |
| 88    | 156   | 118   | 575   | 3     | 9     | 3653    | 914755        | 18408 | 32    |  93358        | 9.50021 |
| 89    | 106   | 118   | 403   | 2     | 9     | 2631    | 909877        | 12508 | 31    |  132351       | 9.50005 |
| 90    | 146   | 120   | 449   | 4     | 9     | 3618    | 913902        | 17520 | 39    |  112484       | 9.50006 |
| 91    | 199   | 187   | 1431  | 3     | 10    | 6676    | 1030537       | 37213 | 26    |  36001        | 9.50022 |
| 92    | 159   | 152   | 805   | 5     | 9     | 4311    | 919857        | 24168 | 30    |  63640        | 9.50004 |
| 93    | 115   | 123   | 943   | 3     | 9     | 2610    | 911535        | 14145 | 15    |  56241        | 9.50002 |
| 94    | 181   | 140   | 703   | 3     | 9     | 4573    | 920767        | 25340 | 36    |  73351        | 9.50002 |
| 95    | 128   | 178   | 734   | 4     | 9     | 3881    | 918903        | 22784 | 31    |  68274        | 9.50012 |
| 96    | 44    | 145   | 490   | 3     | 9     | 1357    | 905023        | 6380  | 13    |  108498       | 9.50004 |
| 97    | 91    | 60    | 182   | 2     | 8     | 1245    | 804215        | 5460  | 30    |  304637       | 9.50003 |
| 98    | 178   | 100   | 659   | 2     | 9     | 3206    | 914594        | 17800 | 27    |  78620        | 9.5001  |
| 99    | 167   | 37    | 176   | 4     | 8     | 1825    | 804354        | 6179  | 35    |  306672       | 9.50002 |
| 100   | 113   | 77    | 241   | 2     | 8     | 1697    | 807004        | 8701  | 36    |  226274       | 9.50005 |

</details>

k と R の相関は強く存在しているがこれは自明だし、その他は分からない。

次の手をどうしよう。
現状は色を割り当てる順番を表わす列をshuffleし都度mexを取っている。 mexでなくて乱択はどうか。 色数を最小化したいのでmexは直感的。
焼き鈍しかビームサーチを入れたい。
まず解空間の台集合はどうなるか。 今は添字の列だがもっと直接的に区画から色への関数の方が正しそう。
列を取るとするとswapなどが近傍となるが、前回同様に実質random walkにしかならないので無駄のはず。
あるマスの色の修正を近傍と取りたい。
なんだか焼き鈍しになりそう。 文脈ほぼないし。
評価関数はどうなるか。
色数の減少が第一義なのでそれだけ考える。
生の色数を使うのは平坦なのでありえない。 それぞれの色の利用頻度の最小値や分散がよさそう。
色は頻度順に並べておくとする。 色 k-1 をすべて消したい。 その色を使っているマスの修正を試み、だめならその周囲をいじるのが正しそう。
頻度の最小値を評価関数にすると、色 k-1 以外を全部shuffleする近傍が平行移動になる。
このような平行移動は焼き鈍しを考える上でどう扱えばいいのか。 効率のよい多点スタートのように扱えそうだけど。

ほんとうに非平面的なのか。
visualizerの表現能力足りてなくてそのあたりよく分かってない。
ここらで確認しておきたい。
ちゃんと非連結になってた。
visualizer読んだときそう書いてたしそれはそう。
盤面が小さいと合併が起こりうるが、大きいとそうではないのでやはりだめ。
端から平面グラフとして解いていく案はない。

評価関数に対する平行移動について。
そもそも焼き鈍しで火を入れ悪化を許すのは局所解を脱するため。
評価関数だけ保って解空間から点を取り直せるならそれはこの機能を代替しうるだろう。
となるといっそ山登りの方が強くなるということもあるかも。
取り直し方が一様なのか広めの近傍なのかの影響はよく分からない。
前者ならrandom walkみが高くなり、後者なら1段上での焼き鈍しが有効になりうる気がする。

[kosakkun](https://www.topcoder.com/members/kosakkun) プロが1位になってた。
ぜひともそのまま踏ん張ってほしい。
[ichyo](https://www.topcoder.com/members/ichyo) さんが青なのに4位だが彼はalgo赤。
[tourist](https://www.topcoder.com/members/tourist) の5位と合わせるとalgo寄りの解法があるのかも。

| Handle   | Score     | Rank  | Last Submission Time                               | Language      | Example Tests | Submissions    | Current Rating   | Predicted Rating | Rating Delta |
|----------|-----------|-------|----------------------------------------------------|---------------|---------------|----------------|------------------|------------------|--------------|
| kosakkun | 857432.75 | 1     | 05.05.2018 08:32:09 (2018-05-05T21:32:09+09:00)    | C++           | 5             | 5              | 1562             | 1805.75          | 243.75       |
| CatalinT | 848927.55 | 2     | 05.05.2018 06:24:45 (2018-05-05T19:24:45+09:00)    | C++           | 2             | 2              | 2443             | 2553.90          | 110.90       |
| imazato  | 841510.56 | 3     | 05.05.2018 09:11:45 (2018-05-05T22:11:45+09:00)    | C++           | 5             | 4              | 2474             | 2545.22          | 71.22        |
| ichyo    | 837190.14 | 4     | 05.05.2018 07:02:10 (2018-05-05T20:02:10+09:00)    | C++           | 5             | 2              | 1414             | 1681.97          | 267.97       |
| tourist  | 825315.64 | 5     | 05.05.2018 09:00:39 (2018-05-05T22:00:39+09:00)    | C++           | 2             | 2              | 1935             | 2111.12          | 176.12       |


`e9adf8d39e9e79e1bc7ba07546c400db121e8384` 提出。
15位。 渋い。
[kosakkun](https://www.topcoder.com/members/kosakkun) が消えたなあと思ったら <https://twitter.com/kosakkun/status/992798779152650241> ということらしい。
私も気を付けたい。
自動提出scriptは常用してるし、提出前に最終提出と点数比較してどうこうを挟むべきか。
しかしそういうのは「1時間45分後に提出しておいてね。私はもう寝るから」をして朝起きたら提出されてないなどの事故が発生しそうでこわい。
rating predictorがこけてた。 直した: [#6](https://github.com/kmyk/topcoder-marathon-match-rating-predictor/issues/6)。 過程が雑すぎる、ちゃんとテストをしろ。

| Handle         | Score        | Rank  | Last Submission Time                             | Language  | Example Tests  | Submissions | Current Rating |
|----------------|--------------|-------|--------------------------------------------------|-----------|----------------|-------------|----------------|
| atsT5515       | 877218.04    | 1     | 05.05.2018 10:34:23 (2018-05-05T23:34:23+09:00)  | C++       | 2              | 2           | 2407           |
| CatalinT       | 813571.19    | 2     | 05.05.2018 06:24:45 (2018-05-05T19:24:45+09:00)  | C++       | 2              | 2           | 2443           |
| mugurelionut   | 807637.80    | 3     | 05.05.2018 11:09:04 (2018-05-06T00:09:04+09:00)  | C++       | 6              | 3           | 2383           |
| imazato        | 805691.94    | 4     | 05.05.2018 09:11:45 (2018-05-05T22:11:45+09:00)  | C++       | 6              | 4           | 2474           |
| ichyo          | 801997.68    | 5     | 05.05.2018 07:02:10 (2018-05-05T20:02:10+09:00)  | C++       | 5              | 2           | 1414           |
| tourist        | 790036.66    | 6     | 05.05.2018 09:00:39 (2018-05-05T22:00:39+09:00)  | C++       | 2              | 2           | 1935           |
| chokudai       | 788909.06    | 7     | 05.05.2018 11:05:09 (2018-05-06T00:05:09+09:00)  | C++       | 7              | 4           | 2730           |
| marek.cygan    | 785466.42    | 8     | 05.05.2018 11:22:55 (2018-05-06T00:22:55+09:00)  | C++       | 6              | 4           | 2511           |
| tomerun        | 741189.02    | 9     | 05.05.2018 07:12:18 (2018-05-05T20:12:18+09:00)  | C++       | 3              | 2           | 2576           |
| kt_tenel       | 726722.54    | 10    | 05.05.2018 11:23:16 (2018-05-06T00:23:16+09:00)  | C++       | 3              | 3           | 1265           |
| wleite         | 717908.91    | 11    | 05.05.2018 09:51:08 (2018-05-05T22:51:08+09:00)  | Java      | 2              | 2           | 2727           |
| Daiver19       | 717011.75    | 12    | 05.05.2018 11:55:56 (2018-05-06T00:55:56+09:00)  | C++       | 2              | 2           | 2008           |
| kotamanegi     | 714681.00    | 13    | 05.05.2018 12:07:42 (2018-05-06T01:07:42+09:00)  | C++       | 14             | 6           | 1601           |
| tanzaku        | 702373.71    | 14    | 05.05.2018 11:11:10 (2018-05-06T00:11:10+09:00)  | Java      | 3              | 3           | 1101           |
| kimiyuki       | 698041.13    | 15    | 05.05.2018 12:08:54 (2018-05-06T01:08:54+09:00)  | C++       | 2              | 2           | 2069           |

評価は次。
内容としては頻度最小の色を舐めて削除とその他をshuffleすることを繰り返した。
これを交互にやったが、実装してから気付いたがこれ同時にやった方がコードが綺麗。
ほぼすべてで k = 7 。
k = 6 やそれ以下をどれぐらい出せればいいのか知りたいけど難しそう。
とりあえずは skipped の最小化を目指そう。

<details>
<summary>表</summary>

| seed  | H     | W     | R     | C     | k     | skipped   | score     | HW    | HW/R  | iteration     | time     |
|-------|-------|-------|-------|-------|-------|-----------|-----------|-------|-------|---------------|----------|
| 1     | 20    | 20    | 16    | 2     | 7     | 150       | 700250    | 400   | 25    | 7920200       | 9.50013  |
| 2     | 200   | 200   | 1290  | 5     | 7     | 7748      | 732252    | 40000 | 31    | 107800        | 9.50305  |
| 3     | 183   | 55    | 214   | 2     | 7     | 2202      | 707863    | 10065 | 47    | 774800        | 9.50061  |
| 4     | 141   | 198   | 1642  | 2     | 7     | 5034      | 722884    | 27918 | 17    | 95700         | 9.50488  |
| 5     | 156   | 23    | 83    | 2     | 6     | 991       | 602597    | 3588  | 43    | 2074400       | 9.5003   |
| 6     | 82    | 76    | 207   | 4     | 7     | 1506      | 704726    | 6232  | 30    | 649800        | 9.50091  |
| 7     | 112   | 145   | 854   | 3     | 7     | 3336      | 712904    | 16240 | 19    | 165000        | 9.50182  |
| 8     | 105   | 146   | 806   | 4     | 7     | 3394      | 711936    | 15330 | 19    | 183200        | 9.50293  |
| 9     | 41    | 144   | 227   | 5     | 7     | 1551      | 704353    | 5904  | 26    | 431700        | 9.50221  |
| 10    | 46    | 164   | 359   | 2     | 7     | 1495      | 706049    | 7544  | 21    | 441800        | 9.5002   |
| 11    | 72    | 198   | 432   | 3     | 7     | 2925      | 711331    | 14256 | 33    | 359500        | 9.50019  |
| 12    | 101   | 43    | 101   | 3     | 7     | 1378      | 702965    | 4343  | 43    | 1427500       | 9.50062  |
| 13    | 151   | 136   | 855   | 5     | 7     | 4128      | 716408    | 20536 | 24    | 136900        | 9.50406  |
| 14    | 50    | 98    | 136   | 5     | 7     | 1277      | 703623    | 4900  | 36    | 583900        | 9.50083  |
| 15    | 190   | 56    | 322   | 4     | 7     | 2431      | 708209    | 10640 | 33    | 438300        | 9.5011   |
| 16    | 48    | 81    | 111   | 3     | 7     | 1059      | 702829    | 3888  | 35    | 1374900       | 9.5006   |
| 17    | 130   | 171   | 463   | 5     | 7     | 5042      | 717188    | 22230 | 48    | 269400        | 9.50255  |
| 18    | 177   | 175   | 1191  | 3     | 7     | 5635      | 725340    | 30975 | 26    | 129700        | 9.503    |
| 19    | 104   | 152   | 718   | 4     | 7     | 3216      | 712592    | 15808 | 22    | 195200        | 9.50053  |
| 20    | 172   | 154   | 1394  | 3     | 7     | 5024      | 721464    | 26488 | 19    | 112500        | 9.50183  |
| 21    | 106   | 142   | 1254  | 4     | 7     | 2934      | 712118    | 15052 | 12    | 121700        | 9.5011   |
| 22    | 135   | 82    | 1006  | 3     | 7     | 2220      | 708850    | 11070 | 11    | 158600        | 9.5008   |
| 23    | 117   | 122   | 620   | 4     | 7     | 2980      | 711294    | 14274 | 23    | 213200        | 9.50198  |
| 24    | 90    | 77    | 216   | 4     | 7     | 1640      | 705290    | 6930  | 32    | 559800        | 9.50096  |
| 25    | 136   | 77    | 455   | 2     | 7     | 2113      | 708359    | 10472 | 23    | 347300        | 9.50043  |
| 26    | 120   | 107   | 285   | 3     | 7     | 2928      | 709912    | 12840 | 45    | 548800        | 9.5002   |
| 27    | 57    | 93    | 407   | 5     | 7     | 1265      | 704036    | 5301  | 13    | 292100        | 9.50098  |
| 28    | 136   | 21    | 68    | 5     | 7     | 823       | 702033    | 2856  | 42    | 705700        | 9.50102  |
| 29    | 142   | 85    | 251   | 4     | 7     | 2940      | 709130    | 12070 | 48    | 524600        | 9.50017  |
| 30    | 24    | 115   | 78    | 4     | 7     | 822       | 701938    | 2760  | 35    | 1265500       | 9.50038  |
| 31    | 159   | 154   | 583   | 2     | 7     | 4470      | 720016    | 24486 | 42    | 262800        | 9.50133  |
| 32    | 112   | 82    | 612   | 4     | 7     | 1871      | 707313    | 9184  | 15    | 232200        | 9.50417  |
| 33    | 124   | 32    | 141   | 5     | 7     | 1104      | 702864    | 3968  | 28    | 569700        | 9.50101  |
| 34    | 130   | 25    | 101   | 3     | 7     | 819       | 702431    | 3250  | 32    | 1434100       | 9.50016  |
| 35    | 51    | 22    | 80    | 3     | 7     | 311       | 700811    | 1122  | 14    | 1820600       | 9.50042  |
| 36    | 176   | 32    | 170   | 3     | 7     | 1331      | 704301    | 5632  | 33    | 899700        | 9.50021  |
| 37    | 166   | 50    | 307   | 5     | 7     | 2153      | 706147    | 8300  | 27    | 359500        | 9.50249  |
| 38    | 85    | 160   | 400   | 5     | 7     | 3089      | 710511    | 13600 | 34    | 292500        | 9.50247  |
| 39    | 121   | 177   | 823   | 4     | 7     | 4366      | 717051    | 21417 | 26    | 181900        | 9.50521  |
| 40    | 83    | 149   | 247   | 4     | 7     | 3137      | 709230    | 12367 | 50    | 523900        | 9.50216  |
| 41    | 188   | 169   | 2888  | 2     | 7     | 5833      | 725939    | 31772 | 11    | 52000         | 9.51043  |
| 42    | 160   | 68    | 278   | 2     | 7     | 2160      | 708720    | 10880 | 39    | 589400        | 9.50036  |
| 43    | 144   | 33    | 169   | 5     | 7     | 1303      | 703449    | 4752  | 28    | 524900        | 9.50081  |
| 44    | 139   | 99    | 292   | 3     | 7     | 2943      | 710818    | 13761 | 47    | 538900        | 9.50154  |
| 45    | 115   | 117   | 336   | 4     | 7     | 3263      | 710192    | 13455 | 40    | 419100        | 9.5008   |
| 46    | 105   | 152   | 469   | 3     | 7     | 3322      | 712638    | 15960 | 34    | 333800        | 9.50156  |
| 47    | 170   | 150   | 1593  | 3     | 7     | 4744      | 720756    | 25500 | 16    | 97000         | 9.50865  |
| 48    | 62    | 184   | 671   | 5     | 7     | 2299      | 709109    | 11408 | 17    | 195100        | 9.5018   |
| 49    | 35    | 57    | 124   | 3     | 7     | 525       | 701470    | 1995  | 16    | 1245600       | 9.50005  |
| 50    | 30    | 65    | 45    | 5     | 6     | 693       | 601257    | 1950  | 43    | 1921200       | 9.50039  |
| 51    | 130   | 198   | 2574  | 3     | 7     | 4605      | 721135    | 25740 | 10    | 59200         | 9.51049  |
| 52    | 122   | 33    | 149   | 3     | 7     | 1014      | 703012    | 4026  | 27    | 1035200       | 9.50085  |
| 53    | 58    | 199   | 268   | 4     | 7     | 2666      | 708876    | 11542 | 43    | 516200        | 9.5015   |
| 54    | 157   | 137   | 597   | 5     | 7     | 4292      | 717217    | 21509 | 36    | 215700        | 9.50316  |
| 55    | 38    | 193   | 178   | 3     | 7     | 1795      | 705539    | 7334  | 41    | 860700        | 9.5004   |
| 56    | 77    | 127   | 362   | 4     | 7     | 2129      | 707650    | 9779  | 27    | 398300        | 9.50116  |
| 57    | 132   | 183   | 561   | 5     | 7     | 5214      | 718942    | 24156 | 43    | 221300        | 9.50075  |
| 58    | 57    | 56    | 199   | 5     | 7     | 836       | 702356    | 3192  | 16    | 486900        | 9.50108  |
| 59    | 168   | 186   | 1838  | 4     | 7     | 5658      | 725590    | 31248 | 17    | 80500         | 9.50047  |
| 60    | 98    | 173   | 368   | 3     | 7     | 3748      | 713206    | 16954 | 46    | 429500        | 9.50065  |
| 61    | 152   | 177   | 840   | 5     | 7     | 5610      | 721294    | 26904 | 32    | 159400        | 9.50257  |
| 62    | 147   | 176   | 1361  | 3     | 7     | 4741      | 721131    | 25872 | 19    | 113200        | 9.50244  |
| 63    | 42    | 130   | 182   | 4     | 7     | 1425      | 704035    | 5460  | 30    | 716300        | 9.5013   |
| 64    | 147   | 99    | 291   | 4     | 7     | 3496      | 711057    | 14553 | 50    | 474300        | 9.50022  |
| 65    | 36    | 186   | 418   | 2     | 7     | 1358      | 705338    | 6696  | 16    | 394400        | 9.50198  |
| 66    | 75    | 165   | 475   | 3     | 7     | 2609      | 709766    | 12375 | 26    | 333100        | 9.50279  |
| 67    | 174   | 111   | 429   | 5     | 7     | 4249      | 715065    | 19314 | 45    | 283000        | 9.50187  |
| 68    | 101   | 187   | 449   | 4     | 7     | 4393      | 714494    | 18887 | 42    | 325100        | 9.5006   |
| 69    | 170   | 173   | 2941  | 5     | 7     | 5399      | 724011    | 29410 | 10    | 48800         | 9.51454  |
| 70    | 156   | 39    | 434   | 2     | 7     | 1213      | 704871    | 6084  | 14    | 383400        | 9.50208  |
| 71    | 22    | 35    | 19    | 2     | 6     | 288       | 600482    | 770   | 40    | 8246500       | 9.50008  |
| 72    | 34    | 164   | 428   | 3     | 7     | 1260      | 704316    | 5576  | 13    | 373500        | 9.50172  |
| 73    | 176   | 159   | 1076  | 2     | 7     | 5214      | 722770    | 27984 | 26    | 145600        | 9.5051   |
| 74    | 46    | 198   | 607   | 2     | 7     | 1760      | 707348    | 9108  | 15    | 274700        | 9.50203  |
| 75    | 188   | 29    | 136   | 2     | 6     | 1464      | 603988    | 5452  | 40    | 1267600       | 9.50065  |
| 76    | 194   | 151   | 732   | 3     | 7     | 5493      | 723801    | 29294 | 40    | 211300        | 9.50031  |
| 77    | 97    | 196   | 1118  | 5     | 7     | 3883      | 715129    | 19012 | 17    | 126000        | 9.50204  |
| 78    | 166   | 128   | 664   | 2     | 7     | 3958      | 717290    | 21248 | 32    | 240700        | 9.50328  |
| 79    | 150   | 120   | 857   | 2     | 7     | 3507      | 714493    | 18000 | 21    | 189600        | 9.50484  |
| 80    | 112   | 157   | 418   | 2     | 7     | 3613      | 713971    | 17584 | 42    | 387700        | 9.50018  |
| 81    | 24    | 180   | 96    | 5     | 7     | 1111      | 703209    | 4320  | 45    | 675800        | 9.50017  |
| 82    | 142   | 195   | 710   | 5     | 7     | 5378      | 722312    | 27690 | 39    | 183700        | 9.50313  |
| 83    | 135   | 157   | 1324  | 4     | 7     | 4025      | 717170    | 21195 | 16    | 114400        | 9.50064  |
| 84    | 158   | 163   | 757   | 5     | 7     | 4897      | 720857    | 25754 | 34    | 170900        | 9.50055  |
| 85    | 57    | 163   | 238   | 3     | 7     | 2400      | 706891    | 9291  | 39    | 648600        | 9.50024  |
| 86    | 41    | 51    | 116   | 5     | 7     | 625       | 701466    | 2091  | 18    | 619100        | 9.50085  |
| 87    | 48    | 192   | 341   | 5     | 7     | 2034      | 707182    | 9216  | 27    | 325700        | 9.50158  |
| 88    | 156   | 118   | 575   | 3     | 7     | 3759      | 714649    | 18408 | 32    | 268700        | 9.50085  |
| 89    | 106   | 118   | 403   | 2     | 7     | 2512      | 709996    | 12508 | 31    | 391800        | 9.50017  |
| 90    | 146   | 120   | 449   | 4     | 7     | 3780      | 713740    | 17520 | 39    | 321100        | 9.50179  |
| 91    | 199   | 187   | 1431  | 3     | 7     | 7030      | 730183    | 37213 | 26    | 105900        | 9.50604  |
| 92    | 159   | 152   | 805   | 5     | 7     | 4723      | 719445    | 24168 | 30    | 162100        | 9.50344  |
| 93    | 115   | 123   | 943   | 3     | 7     | 2805      | 711340    | 14145 | 15    | 162100        | 9.50094  |
| 94    | 181   | 140   | 703   | 3     | 7     | 4967      | 720373    | 25340 | 36    | 216400        | 9.50267  |
| 95    | 128   | 178   | 734   | 4     | 7     | 4555      | 718229    | 22784 | 31    | 198700        | 9.50078  |
| 96    | 44    | 145   | 490   | 3     | 7     | 1289      | 705091    | 6380  | 13    | 319500        | 9.50332  |
| 97    | 91    | 60    | 182   | 2     | 7     | 1253      | 704207    | 5460  | 30    | 880400        | 9.50082  |
| 98    | 178   | 100   | 659   | 2     | 7     | 3468      | 714332    | 17800 | 27    | 248700        | 9.50374  |
| 99    | 167   | 37    | 176   | 4     | 7     | 1611      | 704568    | 6179  | 35    | 684100        | 9.50048  |
| 100   | 113   | 77    | 241   | 2     | 7     | 1900      | 706801    | 8701  | 36    | 651700        | 9.50123  |

</details>

誤読していた。
<https://apps.topcoder.com/forums/?module=Thread&threadID=917504&start=0> で気付けた。
raw scoreは存在しているけどまったく使われないぽい。 なんの罠ですかこれ。
(C\_min / C\_your) * (P\_min / P\_your) を最大化せよとのこと。
raw scoreの説明の段落まで読んでその下は飛ばしていいやつだと判断してしまっていた。


焼き鈍しの形にした。
局所的に1点修正するのと全体を一様に掻き回すのを両方やる。
いくらかは改善している。
`b7f873411313f3d10b94c4bc778fa209c63fcb05`。
提出結果は 19位 -> 15位。 実質失敗。
点差で言うと 0.877e6 と 0.727e6 なのでここから損失が 0.829 倍になる。
6/7 = 0.857 なのですべてのケースで C = 6 を達成するぐらいしないと足りない。
ということは実際そうなのではないか。

| Handle        | Score     | Rank    | Last Submission Time                             | Language  | Example Tests | Submissions | Current Rating | Predicted Rating | Rating Delta |
|---------------|-----------|---------|--------------------------------------------------|-----------|---------------|-------------|----------------|------------------|--------------|
| atsT5515      | 876651.40 | 1       | 05.05.2018 10:34:23 (2018-05-05T23:34:23+09:00)  | C++       | 2             | 2           | 2407           | 2565.28          | 158.28       |
| CatalinT      | 832227.30 | 2       | 05.05.2018 14:30:56 (2018-05-06T03:30:56+09:00)  | C++       | 3             | 3           | 2443           | 2553.90          | 110.90       |
| kosakkun      | 821676.24 | 3       | 05.05.2018 14:05:55 (2018-05-06T03:05:55+09:00)  | C++       | 7             | 7           | 1562           | 1805.75          | 243.75       |
| mugurelionut  | 815222.48 | 4       | 05.05.2018 13:14:07 (2018-05-06T02:14:07+09:00)  | C++       | 8             | 4           | 2383           | 2449.87          | 66.87        |
| chokudai      | 808223.61 | 5       | 05.05.2018 13:18:30 (2018-05-06T02:18:30+09:00)  | C++       | 9             | 5           | 2730           | 2742.44          | 12.44        |
| imazato       | 805147.50 | 6       | 05.05.2018 09:11:45 (2018-05-05T22:11:45+09:00)  | C++       | 6             | 4           | 2474           | 2501.93          | 27.93        |
| marek.cygan   | 802260.84 | 7       | 05.05.2018 13:29:25 (2018-05-06T02:29:25+09:00)  | C++       | 7             | 5           | 2511           | 2527.22          | 16.22        |
| tourist       | 794979.24 | 8       | 05.05.2018 13:43:10 (2018-05-06T02:43:10+09:00)  | C++       | 3             | 3           | 1935           | 2070.96          | 135.96       |
| ichyo         | 793181.58 | 9       | 05.05.2018 12:29:27 (2018-05-06T01:29:27+09:00)  | C++       | 6             | 3           | 1414           | 1620.58          | 206.58       |
| wleite        | 778524.98 | 10      | 05.05.2018 13:40:08 (2018-05-06T02:40:08+09:00)  | Java      | 3             | 3           | 2727           | 2694.11          | -32.89       |
| gorbunov      | 776235.41 | 11      | 05.05.2018 14:44:32 (2018-05-06T03:44:32+09:00)  | C++       | 5             | 3           | 1986           | 2053.41          | 67.41        |
| tanzaku       | 765496.77 | 12      | 05.05.2018 13:23:16 (2018-05-06T02:23:16+09:00)  | Java      | 5             | 4           | 1101           | 1283.61          | 182.61       |
| tomerun       | 740639.74 | 13      | 05.05.2018 07:12:18 (2018-05-05T20:12:18+09:00)  | C++       | 3             | 2           | 2576           | 2542.00          | -34.00       |
| kt_tenel      | 732166.83 | 14      | 05.05.2018 13:26:01 (2018-05-06T02:26:01+09:00)  | C++       | 6             | 4           | 1265           | 1789.27          | 524.27       |
| kimiyuki      | 726633.46 | 15      | 05.05.2018 14:42:41 (2018-05-06T03:42:41+09:00)  | C++       | 3             | 3           | 2069           | 2125.91          | 56.91        |


HW - P の値が前回の結果 290935 から 316491 に。
もう少し上がる予定だったのだが。

<details>
<summary>表</summary>

| seed    | H     | W     | R     | C0    | C     | P     | Pc    | rawScore      | HW    | HW/R  | iteration     | time    |
|---------|-------|-------|-------|-------|-------|-------|-------|---------------|-------|-------|---------------|---------|
| 1       | 20    | 20    | 16    | 2     | 7     | 250   | 150   | 700250        | 400   | 25    | 9063901       | 9.50005 |
| 2       | 200   | 200   | 1290  | 5     | 7     | 32077 | 7923  | 732077        | 40000 | 31    | 231501        | 9.50135 |
| 3       | 183   | 55    | 214   | 2     | 7     | 7542  | 2523  | 707542        | 10065 | 47    | 2549801       | 9.50018 |
| 4       | 141   | 198   | 1642  | 2     | 7     | 22681 | 5237  | 722681        | 27918 | 17    | 457801        | 9.50109 |
| 5       | 156   | 23    | 83    | 2     | 6     | 2438  | 1150  | 602438        | 3588  | 43    | 5276801       | 9.50006 |
| 6       | 82    | 76    | 207   | 4     | 7     | 4436  | 1796  | 704436        | 6232  | 30    | 1001901       | 9.50083 |
| 7       | 112   | 145   | 854   | 3     | 7     | 12777 | 3463  | 712777        | 16240 | 19    | 739201        | 9.50014 |
| 8       | 105   | 146   | 806   | 4     | 7     | 11968 | 3362  | 711968        | 15330 | 19    | 546501        | 9.5018  |
| 9       | 41    | 144   | 227   | 5     | 7     | 4276  | 1628  | 704276        | 5904  | 26    | 441501        | 9.50078 |
| 10      | 46    | 164   | 359   | 2     | 7     | 5809  | 1735  | 705809        | 7544  | 21    | 1806501       | 9.50043 |
| 11      | 72    | 198   | 432   | 3     | 7     | 10798 | 3458  | 710798        | 14256 | 33    | 1289001       | 9.50005 |
| 12      | 101   | 43    | 101   | 3     | 6     | 3144  | 1199  | 603144        | 4343  | 43    | 3571201       | 9.50011 |
| 13      | 151   | 136   | 855   | 5     | 7     | 16105 | 4431  | 716105        | 20536 | 24    | 315901        | 9.50147 |
| 14      | 50    | 98    | 136   | 5     | 7     | 3478  | 1422  | 703478        | 4900  | 36    | 448801        | 9.50114 |
| 15      | 190   | 56    | 322   | 4     | 7     | 8063  | 2577  | 708063        | 10640 | 33    | 840301        | 9.50037 |
| 16      | 48    | 81    | 111   | 3     | 6     | 2782  | 1106  | 602782        | 3888  | 35    | 2827301       | 9.50008 |
| 17      | 130   | 171   | 463   | 5     | 7     | 16780 | 5450  | 716780        | 22230 | 48    | 377501        | 9.50254 |
| 18      | 177   | 175   | 1191  | 3     | 7     | 24550 | 6425  | 724550        | 30975 | 26    | 544901        | 9.5003  |
| 19      | 104   | 152   | 718   | 4     | 7     | 12223 | 3585  | 712223        | 15808 | 22    | 578401        | 9.50159 |
| 20      | 172   | 154   | 1394  | 3     | 7     | 21346 | 5142  | 721346        | 26488 | 19    | 465901        | 9.50079 |
| 21      | 106   | 142   | 1254  | 4     | 7     | 11902 | 3150  | 711902        | 15052 | 12    | 379101        | 9.50193 |
| 22      | 135   | 82    | 1006  | 3     | 7     | 8767  | 2303  | 708767        | 11070 | 11    | 660301        | 9.50123 |
| 23      | 117   | 122   | 620   | 4     | 7     | 11058 | 3216  | 711058        | 14274 | 23    | 639701        | 9.50076 |
| 24      | 90    | 77    | 216   | 4     | 7     | 5071  | 1859  | 705071        | 6930  | 32    | 974901        | 9.5008  |
| 25      | 136   | 77    | 455   | 2     | 7     | 8171  | 2301  | 708171        | 10472 | 23    | 1515301       | 9.50064 |
| 26      | 120   | 107   | 285   | 3     | 7     | 9481  | 3359  | 709481        | 12840 | 45    | 1655101       | 9.50043 |
| 27      | 57    | 93    | 407   | 5     | 7     | 3952  | 1349  | 703952        | 5301  | 13    | 396201        | 9.50227 |
| 28      | 136   | 21    | 68    | 5     | 6     | 2103  | 753   | 602103        | 2856  | 42    | 1165401       | 9.5005  |
| 29      | 142   | 85    | 251   | 4     | 7     | 8799  | 3271  | 708799        | 12070 | 48    | 954201        | 9.50015 |
| 30      | 24    | 115   | 78    | 4     | 6     | 1845  | 915   | 601845        | 2760  | 35    | 2337101       | 9.5003  |
| 31      | 159   | 154   | 583   | 2     | 7     | 19423 | 5063  | 719423        | 24486 | 42    | 1218101       | 9.50021 |
| 32      | 112   | 82    | 612   | 4     | 7     | 7032  | 2152  | 707032        | 9184  | 15    | 629601        | 9.50114 |
| 33      | 124   | 32    | 141   | 5     | 7     | 2704  | 1264  | 702704        | 3968  | 28    | 473801        | 9.50184 |
| 34      | 130   | 25    | 101   | 3     | 6     | 2418  | 832   | 602418        | 3250  | 32    | 3422401       | 9.50026 |
| 35      | 51    | 22    | 80    | 3     | 6     | 773   | 349   | 600773        | 1122  | 14    | 3869401       | 9.50015 |
| 36      | 176   | 32    | 170   | 3     | 7     | 4119  | 1513  | 704119        | 5632  | 33    | 2174601       | 9.50012 |
| 37      | 166   | 50    | 307   | 5     | 7     | 6186  | 2114  | 706186        | 8300  | 27    | 425901        | 9.50051 |
| 38      | 85    | 160   | 400   | 5     | 7     | 10167 | 3433  | 710167        | 13600 | 34    | 395801        | 9.50175 |
| 39      | 121   | 177   | 823   | 4     | 7     | 16764 | 4653  | 716764        | 21417 | 26    | 540401        | 9.50168 |
| 40      | 83    | 149   | 247   | 4     | 7     | 9030  | 3337  | 709030        | 12367 | 50    | 970501        | 9.50082 |
| 41      | 188   | 169   | 2888  | 2     | 7     | 25884 | 5888  | 725884        | 31772 | 11    | 268201        | 9.502   |
| 42      | 160   | 68    | 278   | 2     | 7     | 8205  | 2675  | 708205        | 10880 | 39    | 2206701       | 9.50042 |
| 43      | 144   | 33    | 169   | 5     | 7     | 3287  | 1465  | 703287        | 4752  | 28    | 464801        | 9.50135 |
| 44      | 139   | 99    | 292   | 3     | 7     | 10329 | 3432  | 710329        | 13761 | 47    | 1639201       | 9.50015 |
| 45      | 115   | 117   | 336   | 4     | 7     | 10121 | 3334  | 710121        | 13455 | 40    | 857201        | 9.5009  |
| 46      | 105   | 152   | 469   | 3     | 7     | 12210 | 3750  | 712210        | 15960 | 34    | 1195101       | 9.50044 |
| 47      | 170   | 150   | 1593  | 3     | 7     | 20571 | 4929  | 720571        | 25500 | 16    | 416301        | 9.50125 |
| 48      | 62    | 184   | 671   | 5     | 7     | 8863  | 2545  | 708863        | 11408 | 17    | 349501        | 9.50262 |
| 49      | 35    | 57    | 124   | 3     | 6     | 1434  | 561   | 601434        | 1995  | 16    | 2852001       | 9.5003  |
| 50      | 30    | 65    | 45    | 5     | 6     | 1192  | 758   | 601192        | 1950  | 43    | 1501301       | 9.50053 |
| 51      | 130   | 198   | 2574  | 3     | 7     | 20852 | 4888  | 720852        | 25740 | 10    | 249401        | 9.50285 |
| 52      | 122   | 33    | 149   | 3     | 7     | 2765  | 1261  | 702765        | 4026  | 27    | 2371201       | 9.50035 |
| 53      | 58    | 199   | 268   | 4     | 7     | 8465  | 3077  | 708465        | 11542 | 43    | 932801        | 9.50064 |
| 54      | 157   | 137   | 597   | 5     | 7     | 16618 | 4891  | 716618        | 21509 | 36    | 357401        | 9.50168 |
| 55      | 38    | 193   | 178   | 3     | 7     | 5250  | 2084  | 705250        | 7334  | 41    | 2100001       | 9.50032 |
| 56      | 77    | 127   | 362   | 4     | 7     | 7201  | 2578  | 707201        | 9779  | 27    | 822001        | 9.50048 |
| 57      | 132   | 183   | 561   | 5     | 7     | 18699 | 5457  | 718699        | 24156 | 43    | 366601        | 9.50055 |
| 58      | 57    | 56    | 199   | 5     | 7     | 2216  | 976   | 702216        | 3192  | 16    | 447301        | 9.5011  |
| 59      | 168   | 186   | 1838  | 4     | 7     | 24959 | 6289  | 724959        | 31248 | 17    | 299301        | 9.50061 |
| 60      | 98    | 173   | 368   | 3     | 7     | 12954 | 4000  | 712954        | 16954 | 46    | 1416601       | 9.50026 |
| 61      | 152   | 177   | 840   | 5     | 7     | 21165 | 5739  | 721165        | 26904 | 32    | 310501        | 9.50208 |
| 62      | 147   | 176   | 1361  | 3     | 7     | 20691 | 5181  | 720691        | 25872 | 19    | 498901        | 9.50039 |
| 63      | 42    | 130   | 182   | 4     | 7     | 3821  | 1639  | 703821        | 5460  | 30    | 1062401       | 9.50058 |
| 64      | 147   | 99    | 291   | 4     | 7     | 10861 | 3692  | 710861        | 14553 | 50    | 911501        | 9.50097 |
| 65      | 36    | 186   | 418   | 2     | 7     | 5052  | 1644  | 705052        | 6696  | 16    | 1650901       | 9.5006  |
| 66      | 75    | 165   | 475   | 3     | 7     | 9566  | 2809  | 709566        | 12375 | 26    | 1208201       | 9.50049 |
| 67      | 174   | 111   | 429   | 5     | 7     | 14565 | 4749  | 714565        | 19314 | 45    | 399301        | 9.50052 |
| 68      | 101   | 187   | 449   | 4     | 7     | 14182 | 4705  | 714182        | 18887 | 42    | 773901        | 9.50019 |
| 69      | 170   | 173   | 2941  | 5     | 7     | 23846 | 5564  | 723846        | 29410 | 10    | 154901        | 9.50498 |
| 70      | 156   | 39    | 434   | 2     | 7     | 4694  | 1390  | 704694        | 6084  | 14    | 1609201       | 9.50013 |
| 71      | 22    | 35    | 19    | 2     | 6     | 447   | 323   | 600447        | 770   | 40    | 10786201      | 9.50008 |
| 72      | 34    | 164   | 428   | 3     | 7     | 4250  | 1326  | 704250        | 5576  | 13    | 1308701       | 9.50048 |
| 73      | 176   | 159   | 1076  | 2     | 7     | 22757 | 5227  | 722757        | 27984 | 26    | 703301        | 9.50079 |
| 74      | 46    | 198   | 607   | 2     | 7     | 7128  | 1980  | 707128        | 9108  | 15    | 1211701       | 9.5001  |
| 75      | 188   | 29    | 136   | 2     | 6     | 3889  | 1563  | 603889        | 5452  | 40    | 3942101       | 9.50012 |
| 76      | 194   | 151   | 732   | 3     | 7     | 22919 | 6375  | 722919        | 29294 | 40    | 860601        | 9.50092 |
| 77      | 97    | 196   | 1118  | 5     | 7     | 15074 | 3938  | 715074        | 19012 | 17    | 281001        | 9.50166 |
| 78      | 166   | 128   | 664   | 2     | 7     | 16914 | 4334  | 716914        | 21248 | 32    | 1110401       | 9.50056 |
| 79      | 150   | 120   | 857   | 2     | 7     | 14319 | 3681  | 714319        | 18000 | 21    | 880301        | 9.50084 |
| 80      | 112   | 157   | 418   | 2     | 7     | 13574 | 4010  | 713574        | 17584 | 42    | 1638801       | 9.50008 |
| 81      | 24    | 180   | 96    | 5     | 7     | 2829  | 1491  | 702829        | 4320  | 45    | 495401        | 9.50035 |
| 82      | 142   | 195   | 710   | 5     | 7     | 21469 | 6221  | 721469        | 27690 | 39    | 341101        | 9.50108 |
| 83      | 135   | 157   | 1324  | 4     | 7     | 16970 | 4225  | 716970        | 21195 | 16    | 394601        | 9.50176 |
| 84      | 158   | 163   | 757   | 5     | 7     | 20281 | 5473  | 720281        | 25754 | 34    | 324401        | 9.50273 |
| 85      | 57    | 163   | 238   | 3     | 7     | 6882  | 2409  | 706882        | 9291  | 39    | 1925101       | 9.50042 |
| 86      | 41    | 51    | 116   | 5     | 7     | 1349  | 742   | 701349        | 2091  | 18    | 486501        | 9.50033 |
| 87      | 48    | 192   | 341   | 5     | 7     | 6857  | 2359  | 706857        | 9216  | 27    | 420701        | 9.50168 |
| 88      | 156   | 118   | 575   | 3     | 7     | 14279 | 4129  | 714279        | 18408 | 32    | 1040401       | 9.50094 |
| 89      | 106   | 118   | 403   | 2     | 7     | 9690  | 2818  | 709690        | 12508 | 31    | 1681001       | 9.50038 |
| 90      | 146   | 120   | 449   | 4     | 7     | 13569 | 3951  | 713569        | 17520 | 39    | 771001        | 9.50113 |
| 91      | 199   | 187   | 1431  | 3     | 7     | 29964 | 7249  | 729964        | 37213 | 26    | 476101        | 9.50149 |
| 92      | 159   | 152   | 805   | 5     | 7     | 18756 | 5412  | 718756        | 24168 | 30    | 322301        | 9.50134 |
| 93      | 115   | 123   | 943   | 3     | 7     | 11168 | 2977  | 711168        | 14145 | 15    | 695601        | 9.50071 |
| 94      | 181   | 140   | 703   | 3     | 7     | 19708 | 5632  | 719708        | 25340 | 36    | 884201        | 9.50047 |
| 95      | 128   | 178   | 734   | 4     | 7     | 17733 | 5051  | 717733        | 22784 | 31    | 586101        | 9.50112 |
| 96      | 44    | 145   | 490   | 3     | 7     | 4891  | 1489  | 704891        | 6380  | 13    | 1193101       | 9.50034 |
| 97      | 91    | 60    | 182   | 2     | 7     | 4001  | 1459  | 704001        | 5460  | 30    | 3028001       | 9.50021 |
| 98      | 178   | 100   | 659   | 2     | 7     | 14055 | 3745  | 714055        | 17800 | 27    | 1110701       | 9.50086 |
| 99      | 167   | 37    | 176   | 4     | 7     | 4273  | 1906  | 704273        | 6179  | 35    | 1064101       | 9.50056 |
| 100     | 113   | 77    | 241   | 2     | 7     | 6603  | 2098  | 706603        | 8701  | 36    | 2572401       | 9.50009 |

</details>

さてどうしよう。
C = 6 を狙いにいくべきか、無視して P を減らすべきか。
前者が達成できれば後者にも繋がるため、可能ならば C = 6 をしたい。 その方がきっと楽しい。
しかし C = 6 は現状達成できないので、それならばきちんと諦めてしまうのも改善に繋がりうる。
現在の焼き鈍しの評価関数は生スコアであり、 C を減らす方向には実質何も関与しない。
消したい色の頂点の次数などまで含めたちゃんとした評価関数を試さないとだめ。
毎回すべての色の置換を試してるの速度面で不利では。

ひとまず寝る。

### 5/6

おはようございます。
32位にまで落ちててもうだめです。
朝8時 EDT 起床なのでたぶん健康的。

Score値はほぼ変化してないので上はもうほぼ最適解なのかなあ。
やはり C = 6 。
Score値の列は連続な雰囲気になってきている。
[kosakkun](https://www.topcoder.com/members/kosakkun) さんは9位。
点数的な目標は現実的には 0.84e6 か。
[tourist](https://www.topcoder.com/members/tourist) は5位。
普段MMではそうでもないので珍しいが、どうせ頭複数所持者なのでメタ読みできない。

| Handle         | Score     | Rank  | Last Submission Time                            | Language | Example Tests | Submissions | Current Rating | Predicted Rating | Rating Delta |
|----------------|-----------|-------|-------------------------------------------------|----------|---------------|-------------|----------------|------------------|--------------|
| atsT5515       | 875096.27 | 1     | 05.05.2018 10:34:23 (2018-05-05T23:34:23+09:00) | C++      | 2             | 2           | 2407           | 2563.00          | 156.00       |
| wleite         | 864529.17 | 2     | 05.06.2018 02:41:06 (2018-05-06T15:41:06+09:00) | Java     | 8             | 8           | 2727           | 2786.43          | 59.43        |
| CatalinT       | 859519.83 | 3     | 05.06.2018 04:11:58 (2018-05-06T17:11:58+09:00) | C++      | 6             | 6           | 2443           | 2526.29          | 83.29        |
| machy          | 857759.90 | 4     | 05.06.2018 06:24:28 (2018-05-06T19:24:28+09:00) | C++      | 2             | 6           | 1793           | 1973.52          | 180.52       |
| tourist        | 855831.75 | 5     | 05.05.2018 21:44:25 (2018-05-06T10:44:25+09:00) | C++      | 6             | 6           | 1935           | 2119.06          | 184.06       |
| chokudai       | 844385.99 | 6     | 05.06.2018 08:33:47 (2018-05-06T21:33:47+09:00) | C++      | 21            | 12          | 2730           | 2737.62          | 7.62         |
| Kriii          | 844202.80 | 7     | 05.06.2018 07:36:40 (2018-05-06T20:36:40+09:00) | C++      | 13            | 6           | 1414           | 1819.46          | 405.46       |
| kosakkun       | 838758.32 | 8     | 05.06.2018 08:03:12 (2018-05-06T21:03:12+09:00) | C++      | 14            | 10          | 1562           | 1743.29          | 181.29       |
| ichyo          | 828642.85 | 9     | 05.06.2018 08:51:19 (2018-05-06T21:51:19+09:00) | C++      | 11            | 8           | 1414           | 1626.42          | 212.42       |
| gorbunov       | 824346.47 | 10    | 05.06.2018 06:39:28 (2018-05-06T19:39:28+09:00) | C++      | 10            | 7           | 1986           | 2067.09          | 81.09        |
| imazato        | 823829.61 | 11    | 05.05.2018 18:43:31 (2018-05-06T07:43:31+09:00) | C++      | 7             | 5           | 2474           | 2470.01          | -3.99        |
| mugurelionut   | 823166.90 | 12    | 05.06.2018 09:02:57 (2018-05-06T22:02:57+09:00) | C++      | 11            | 6           | 2383           | 2384.30          | 1.30         |
| tanzaku        | 819690.39 | 13    | 05.06.2018 08:57:30 (2018-05-06T21:57:30+09:00) | Java     | 12            | 10          | 1101           | 1283.61          | 182.61       |
| marek.cygan    | 807986.40 | 14    | 05.05.2018 22:37:55 (2018-05-06T11:37:55+09:00) | C++      | 11            | 8           | 2511           | 2493.97          | -17.03       |
| yowa           | 800405.08 | 15    | 05.06.2018 08:35:51 (2018-05-06T21:35:51+09:00) | C++      | 7             | 6           | 2104           | 2136.35          | 32.35        |
| Daiver19       | 798793.91 | 16    | 05.06.2018 02:45:35 (2018-05-06T15:45:35+09:00) | C++      | 10            | 6           | 2008           | 2045.77          | 37.77        |
| PaulJefferys   | 786433.15 | 17    | 05.05.2018 23:10:00 (2018-05-06T12:10:00+09:00) | C++      | 1             | 2           | 2090           | 2125.29          | 35.29        |
| nel215         | 781405.41 | 18    | 05.06.2018 07:16:52 (2018-05-06T20:16:52+09:00) | C++      | 8             | 7           | 1592           | 1702.75          | 110.75       |
| Masa-Y         | 778076.63 | 19    | 05.06.2018 06:20:38 (2018-05-06T19:20:38+09:00) | C++      | 15            | 8           | 1839           | 1893.84          | 54.84        |
| JacoCronje     | 774416.53 | 20    | 05.05.2018 16:19:56 (2018-05-06T05:19:56+09:00) | C++      | 1             | 1           | 2279           | 2265.99          | -13.01       |
| mamekin        | 760843.96 | 21    | 05.06.2018 04:01:20 (2018-05-06T17:01:20+09:00) | C++      | 6             | 4           | 1569           | 1687.53          | 118.53       |
| iehn           | 758210.71 | 22    | 05.06.2018 07:44:15 (2018-05-06T20:44:15+09:00) | C++      | 10            | 7           | 1765           | 1835.24          | 70.24        |
| nika           | 748753.21 | 23    | 05.06.2018 07:08:29 (2018-05-06T20:08:29+09:00) | C++      | 2             | 7           | 2455           | 2402.19          | -52.81       |
| Treeone.       | 740545.53 | 24    | 05.06.2018 07:11:01 (2018-05-06T20:11:01+09:00) | C++      | 2             | 2           | 1067           | 1354.25          | 287.25       |
| tomerun        | 739402.15 | 25    | 05.05.2018 07:12:18 (2018-05-05T20:12:18+09:00) | C++      | 6             | 2           | 2576           | 2508.53          | -67.47       |
| sdya           | 739392.24 | 26    | 05.06.2018 02:51:17 (2018-05-06T15:51:17+09:00) | C++      | 8             | 5           | 2148           | 2132.81          | -15.19       |
| kurenai3110    | 738055.28 | 27    | 05.06.2018 02:48:27 (2018-05-06T15:48:27+09:00) | C++      | 5             | 5           | 2131           | 2111.67          | -19.33       |
| Mojito1        | 737602.97 | 28    | 05.06.2018 08:48:44 (2018-05-06T21:48:44+09:00) | C#       | 4             | 4           | 2308           | 2261.99          | -46.01       |
| kt_tenel       | 734286.97 | 29    | 05.06.2018 05:20:16 (2018-05-06T18:20:16+09:00) | C++      | 13            | 5           | 1265           | 1626.10          | 361.10       |
| senya0126      | 730821.43 | 30    | 05.06.2018 02:26:03 (2018-05-06T15:26:03+09:00) | C++      | 10            | 6           | -              | -                | -            |
| eris_c         | 727099.02 | 31    | 05.06.2018 07:08:12 (2018-05-06T20:08:12+09:00) | C++      | 6             | 6           | 1643           | 1745.21          | 102.21       |
| kimiyuki       | 725403.18 | 32    | 05.05.2018 14:42:41 (2018-05-06T03:42:41+09:00) | C++      | 3             | 3           | 2069           | 2060.95          | -8.05        |

時間を伸ばしてもぜんぜんだめ。
そもそもの探索能力が無なのか、そもそもが限界に近くて C = 6 を諦めてるのが悪いのか。

<details>
<summary>表</summary>

| seed    | H     | W     | R     | C0    | C     | P      | HW    | HW/R  | iteration     | time    |
|---------|-------|-------|-------|-------|-------|--------|-------|-------|---------------|---------|
| 1       | 20    | 20    | 16    | 2     | 7     | 250    | 400   | 25    | 88648201      | 95.0001 |
| 2       | 200   | 200   | 1290  | 5     | 7     | 31287  | 40000 | 31    | 2553801       | 95.001  |
| 3       | 183   | 55    | 214   | 2     | 7     | 7426   | 10065 | 47    | 26494001      | 95.0001 |
| 4       | 141   | 198   | 1642  | 2     | 7     | 22472  | 27918 | 17    | 4415201       | 95.0019 |
| 5       | 156   | 23    | 83    | 2     | 6     | 2457   | 3588  | 43    | 54595101      | 95.0001 |
| 6       | 82    | 76    | 207   | 4     | 7     | 4360   | 6232  | 30    | 10212201      | 95.0001 |
| 7       | 112   | 145   | 854   | 3     | 7     | 12684  | 16240 | 19    | 7486401       | 95.0012 |
| 8       | 105   | 146   | 806   | 4     | 7     | 11769  | 15330 | 19    | 5517501       | 95.0016 |
| 9       | 41    | 144   | 227   | 5     | 7     | 4073   | 5904  | 26    | 4462801       | 95.002  |
| 10      | 46    | 164   | 359   | 2     | 7     | 5732   | 7544  | 21    | 18308701      | 95.0001 |
| 11      | 72    | 198   | 432   | 3     | 7     | 10762  | 14256 | 33    | 12814101      | 95.0001 |
| 12      | 101   | 43    | 101   | 3     | 6     | 3118   | 4343  | 43    | 35962701      | 95.0001 |
| 13      | 151   | 136   | 855   | 5     | 7     | 15821  | 20536 | 24    | 3166501       | 95.0021 |
| 14      | 50    | 98    | 136   | 5     | 7     | 3374   | 4900  | 36    | 4765001       | 95.0005 |
| 15      | 190   | 56    | 322   | 4     | 7     | 7854   | 10640 | 33    | 8823801       | 95.001  |
| 16      | 48    | 81    | 111   | 3     | 6     | 2735   | 3888  | 35    | 34499001      | 95.0001 |
| 17      | 130   | 171   | 463   | 5     | 7     | 16451  | 22230 | 48    | 3900701       | 95.0005 |
| 18      | 177   | 175   | 1191  | 3     | 7     | 24487  | 30975 | 26    | 5581001       | 95.0009 |
| 19      | 104   | 152   | 718   | 4     | 7     | 12214  | 15808 | 22    | 5876401       | 95.0012 |
| 20      | 172   | 154   | 1394  | 3     | 7     | 21116  | 26488 | 19    | 4631101       | 95.0021 |
| 21      | 106   | 142   | 1254  | 4     | 7     | 11862  | 15052 | 12    | 4112001       | 95.0003 |
| 22      | 135   | 82    | 1006  | 3     | 7     | 8681   | 11070 | 11    | 6540201       | 95.0002 |
| 23      | 117   | 122   | 620   | 4     | 7     | 10992  | 14274 | 23    | 6450701       | 95.001  |
| 24      | 90    | 77    | 216   | 4     | 7     | 4932   | 6930  | 32    | 10192101      | 95.0007 |
| 25      | 136   | 77    | 455   | 2     | 7     | 8060   | 10472 | 23    | 15206001      | 95.0001 |
| 26      | 120   | 107   | 285   | 3     | 7     | 9435   | 12840 | 45    | 16540701      | 95.0001 |
| 27      | 57    | 93    | 407   | 5     | 7     | 3902   | 5301  | 13    | 4028601       | 95.0014 |
| 28      | 136   | 21    | 68    | 5     | 6     | 2086   | 2856  | 42    | 14114201      | 95.0008 |
| 29      | 142   | 85    | 251   | 4     | 7     | 8852   | 12070 | 48    | 9326101       | 95.0008 |
| 30      | 24    | 115   | 78    | 4     | 6     | 1880   | 2760  | 35    | 23371601      | 95.0003 |
| 31      | 159   | 154   | 583   | 2     | 7     | 19139  | 24486 | 42    | 12191001      | 95.0007 |
| 32      | 112   | 82    | 612   | 4     | 7     | 7047   | 9184  | 15    | 6500401       | 95.0006 |
| 33      | 124   | 32    | 141   | 5     | 6     | 2838   | 3968  | 28    | 10604001      | 95.0001 |
| 34      | 130   | 25    | 101   | 3     | 6     | 2400   | 3250  | 32    | 34377601      | 95.0002 |
| 35      | 51    | 22    | 80    | 3     | 6     | 739    | 1122  | 14    | 39166201      | 95.0001 |
| 36      | 176   | 32    | 170   | 3     | 7     | 4089   | 5632  | 33    | 21959801      | 95.0004 |
| 37      | 166   | 50    | 307   | 5     | 7     | 6038   | 8300  | 27    | 4257201       | 95.0009 |
| 38      | 85    | 160   | 400   | 5     | 7     | 10239  | 13600 | 34    | 3912401       | 95.0002 |
| 39      | 121   | 177   | 823   | 4     | 7     | 16494  | 21417 | 26    | 5427601       | 95.0006 |
| 40      | 83    | 149   | 247   | 4     | 7     | 8868   | 12367 | 50    | 9634501       | 95.0002 |
| 41      | 188   | 169   | 2888  | 2     | 7     | 25835  | 31772 | 11    | 2428601       | 95.0003 |
| 42      | 160   | 68    | 278   | 2     | 7     | 8134   | 10880 | 39    | 21988201      | 95.0004 |
| 43      | 144   | 33    | 169   | 5     | 6     | 3400   | 4752  | 28    | 8367501       | 95.0004 |
| 44      | 139   | 99    | 292   | 3     | 7     | 10129  | 13761 | 47    | 16257401      | 95.0001 |
| 45      | 115   | 117   | 336   | 4     | 7     | 9886   | 13455 | 40    | 8589701       | 95.0003 |
| 46      | 105   | 152   | 469   | 3     | 7     | 12099  | 15960 | 34    | 12035201      | 95.0005 |
| 47      | 170   | 150   | 1593  | 3     | 7     | 20430  | 25500 | 16    | 4243701       | 95.0021 |
| 48      | 62    | 184   | 671   | 5     | 7     | 8709   | 11408 | 17    | 3423801       | 95.0021 |
| 49      | 35    | 57    | 124   | 3     | 6     | 1450   | 1995  | 16    | 32043401      | 95.0001 |
| 50      | 30    | 65    | 45    | 5     | 6     | 1169   | 1950  | 43    | 15532901      | 95.0006 |
| 51      | 130   | 198   | 2574  | 3     | 7     | 20713  | 25740 | 10    | 2682701       | 95.0027 |
| 52      | 122   | 33    | 149   | 3     | 7     | 2786   | 4026  | 27    | 24098401      | 95.0004 |
| 53      | 58    | 199   | 268   | 4     | 7     | 8345   | 11542 | 43    | 9434501       | 95.001  |
| 54      | 157   | 137   | 597   | 5     | 7     | 16309  | 21509 | 36    | 3609801       | 95.0008 |
| 55      | 38    | 193   | 178   | 3     | 7     | 5158   | 7334  | 41    | 21587501      | 95.0005 |
| 56      | 77    | 127   | 362   | 4     | 7     | 7240   | 9779  | 27    | 8418601       | 95.0003 |
| 57      | 132   | 183   | 561   | 5     | 7     | 18504  | 24156 | 43    | 3673601       | 95.0005 |
| 58      | 57    | 56    | 199   | 5     | 7     | 2176   | 3192  | 16    | 4611101       | 95.0014 |
| 59      | 168   | 186   | 1838  | 4     | 7     | 24786  | 31248 | 17    | 3028901       | 95.0017 |
| 60      | 98    | 173   | 368   | 3     | 7     | 12762  | 16954 | 46    | 14119101      | 95.0005 |
| 61      | 152   | 177   | 840   | 5     | 7     | 21011  | 26904 | 32    | 3187401       | 95.0026 |
| 62      | 147   | 176   | 1361  | 3     | 7     | 20500  | 25872 | 19    | 4890101       | 95.0019 |
| 63      | 42    | 130   | 182   | 4     | 7     | 3870   | 5460  | 30    | 10418501      | 95.0003 |
| 64      | 147   | 99    | 291   | 4     | 7     | 10685  | 14553 | 50    | 9163901       | 95.0006 |
| 65      | 36    | 186   | 418   | 2     | 7     | 5027   | 6696  | 16    | 16345501      | 95.0005 |
| 66      | 75    | 165   | 475   | 3     | 7     | 9353   | 12375 | 26    | 11890701      | 95.0007 |
| 67      | 174   | 111   | 429   | 5     | 7     | 14425  | 19314 | 45    | 3971601       | 95.0009 |
| 68      | 101   | 187   | 449   | 4     | 7     | 14148  | 18887 | 42    | 7667501       | 95.001  |
| 69      | 170   | 173   | 2941  | 5     | 7     | 23638  | 29410 | 10    | 1543901       | 95.0021 |
| 70      | 156   | 39    | 434   | 2     | 7     | 4655   | 6084  | 14    | 15792601      | 95.0002 |
| 71      | 22    | 35    | 19    | 2     | 6     | 447    | 770   | 40    | 106319401     | 95.0001 |
| 72      | 34    | 164   | 428   | 3     | 7     | 4183   | 5576  | 13    | 12927401      | 95.0008 |
| 73      | 176   | 159   | 1076  | 2     | 7     | 22257  | 27984 | 26    | 6891501       | 95.0004 |
| 74      | 46    | 198   | 607   | 2     | 7     | 6999   | 9108  | 15    | 11857501      | 95.0007 |
| 75      | 188   | 29    | 136   | 2     | 6     | 3862   | 5452  | 40    | 39615801      | 95.0002 |
| 76      | 194   | 151   | 732   | 3     | 7     | 22795  | 29294 | 40    | 8511601       | 95.0005 |
| 77      | 97    | 196   | 1118  | 5     | 7     | 14854  | 19012 | 17    | 2814901       | 95.0011 |
| 78      | 166   | 128   | 664   | 2     | 7     | 16499  | 21248 | 32    | 10982401      | 95.0004 |
| 79      | 150   | 120   | 857   | 2     | 7     | 14228  | 18000 | 21    | 8731701       | 95.0004 |
| 80      | 112   | 157   | 418   | 2     | 7     | 13546  | 17584 | 42    | 16219901      | 95.0003 |
| 81      | 24    | 180   | 96    | 5     | 6     | 2881   | 4320  | 45    | 13638901      | 95.0006 |
| 82      | 142   | 195   | 710   | 5     | 7     | 21038  | 27690 | 39    | 3390601       | 95.0028 |
| 83      | 135   | 157   | 1324  | 4     | 7     | 16607  | 21195 | 16    | 3735601       | 95.0004 |
| 84      | 158   | 163   | 757   | 5     | 7     | 20042  | 25754 | 34    | 3286201       | 95.0026 |
| 85      | 57    | 163   | 238   | 3     | 7     | 6655   | 9291  | 39    | 18959801      | 95.0002 |
| 86      | 41    | 51    | 116   | 5     | 7     | 1343   | 2091  | 18    | 4845801       | 95.0011 |
| 87      | 48    | 192   | 341   | 5     | 7     | 6699   | 9216  | 27    | 4171801       | 95.0004 |
| 88      | 156   | 118   | 575   | 3     | 7     | 14116  | 18408 | 32    | 10321201      | 95.0007 |
| 89      | 106   | 118   | 403   | 2     | 7     | 9592   | 12508 | 31    | 16667401      | 95.0008 |
| 90      | 146   | 120   | 449   | 4     | 7     | 13271  | 17520 | 39    | 7649001       | 95.0002 |
| 91      | 199   | 187   | 1431  | 3     | 7     | 29671  | 37213 | 26    | 4439701       | 95.0015 |
| 92      | 159   | 152   | 805   | 5     | 7     | 18778  | 24168 | 30    | 3234601       | 95.0022 |
| 93      | 115   | 123   | 943   | 3     | 7     | 11070  | 14145 | 15    | 6884701       | 95.0001 |
| 94      | 181   | 140   | 703   | 3     | 7     | 19547  | 25340 | 36    | 8634801       | 95.0004 |
| 95      | 128   | 178   | 734   | 4     | 7     | 17771  | 22784 | 31    | 5838401       | 95.0003 |
| 96      | 44    | 145   | 490   | 3     | 7     | 4850   | 6380  | 13    | 11743901      | 95.0004 |
| 97      | 91    | 60    | 182   | 2     | 7     | 3970   | 5460  | 30    | 29625801      | 95.0001 |
| 98      | 178   | 100   | 659   | 2     | 7     | 13993  | 17800 | 27    | 11008201      | 95.0002 |
| 99      | 167   | 37    | 176   | 4     | 7     | 4223   | 6179  | 35    | 10692801      | 95.0001 |
| 100     | 113   | 77    | 241   | 2     | 7     | 6448   | 8701  | 36    | 25172101      | 95.0003 |

</details>

タイガーブック 第11章 レジスタ割付け。
「次数が色数より真に小さい頂点は無視できるのでこれを再帰的にやれ」だそうな。
単純にやると長さ4の閉路グラフが反例。
転送命令で結ばれるレジスタを合併することで最適化しつつそういった反例を潰すようなので、問題設定がすこし違いますねという気持ち。
出典は Kempe 1879 となっているが、彼はchain作っておしいところまで行ったけど撃墜された人のはずで、追い掛けても計算機に乗る手法は出て来なさそう。
実際にそのままやってみるとまず C = 11 を報告しその後塗ってみると C = 9 となる。
保守的に合併してみよう。
隣接頂点の間に包含関係があったら合併を書いてみたがそもそも合併がまったく発生しない。

さっき起きたばかりなのにもう2日目がJSTで終了した。 なんなんだ。 つらい。
きっと雨が降ってるのが悪い。

表が長くて邪魔だなあと思ってたら [Using `<details>` in GitHub](https://gist.github.com/ericclemmons/b146fe5da72ca1f706b2ef72a20ac39d) というのもあるらしい。
試す。

<details>
<summary>てすと</summary>


-   a
-   `b`
-   _c_


</details>

成功。
